## AI 기반 로그 생성기 - 프리셋 속성 가이드

### 1. 프리셋 속성 개요

| 구분            | 규칙/특징                                       | 사용 목적                                                             | 비고                                                               |
| :-------------- | :---------------------------------------------- | :-------------------------------------------------------------------- | :----------------------------------------------------------------- |
| **프리셋 속성** | `#`로 시작하며, **이벤트 속성**으로 사용됨.     | 유저 행동 이벤트에 대한 보편적인 환경 정보 제공.                      | 로그 생성 시 필요에 따라 선택적으로 포함 가능.                     |
| **시스템 필드** | `#account_id`, `#event_time` 등 특수 목적 필드. | 데이터 구조 및 데이터베이스 관리용. 분석 모델에서 직접 사용되지 않음. | **이벤트/유저 속성으로 사용할 수 없음.** 데이터 전송 시 포함 금지. |

---

### 2. 기본 공통 속성

로그 생성 시 기본적으로 포함할 수 있는 공통 속성입니다.

| 속성 이름            | 이름           | 유형   | 설명                                              | 생성 시 고려사항                                |
| :------------------- | :------------- | :----- | :------------------------------------------------ | :---------------------------------------------- |
| **#ip**              | IP 주소        | String | 유저의 IP 주소. 지리적 위치 식별에 사용됨.        | 실제 IP 형식으로 생성 (예: 192.168.1.1)         |
| **#country**         | 국가/지역      | String | IP 주소를 기반으로 결정되는 국가명.               | 국가명 전체 (예: South Korea, United States)    |
| **#country_code**    | 국가/지역 코드 | String | ISO 3166-1 alpha-2 형식 코드.                     | 2자리 코드 (예: KR, US, JP)                     |
| **#province**        | 도/주          | String | IP 주소를 기반으로 결정되는 행정구역.             | 지역명 (예: Seoul, California)                  |
| **#city**            | 도시           | String | IP 주소를 기반으로 결정되는 도시명.               | 도시명 (예: Seoul, San Francisco)               |
| **#lib**             | SDK 유형       | String | 사용 중인 SDK의 종류.                             | 플랫폼 지정 (Android, iOS, JavaScript, Java 등) |
| **#lib_version**     | SDK 버전       | String | 사용 중인 SDK의 버전.                             | 버전 형식 (예: 1.2.3, 2.0.1)                    |
| **#zone_offset**     | 시간대 오프셋  | Number | 디바이스의 시간대 (UTC와의 오프셋 값, 시간 단위). | 숫자 값 (예: 9, -5, 0)                          |
| **#device_id**       | 디바이스 ID    | String | 디바이스의 고유 식별자.                           | UUID 형식 또는 고유 식별자 생성                 |
| **#screen_height**   | 화면 높이      | Number | 디바이스 화면의 픽셀 높이.                        | 픽셀 단위 (예: 1920, 2560)                      |
| **#screen_width**    | 화면 너비      | Number | 디바이스 화면의 픽셀 너비.                        | 픽셀 단위 (예: 1080, 1440)                      |
| **#system_language** | 시스템 언어    | String | 디바이스의 시스템 언어.                           | ISO 639-1 형식 (예: ko, en, ja)                 |

---

### 3. 플랫폼별 속성

특정 플랫폼(모바일, 웹)에서 생성하는 로그에 포함할 수 있는 속성입니다.

#### 3.1. 모든 클라이언트 공통

| 속성 이름         | 이름          | 유형   | 적용 플랫폼 | 설명                       | 생성 시 고려사항                        |
| :---------------- | :------------ | :----- | :---------- | :------------------------- | :-------------------------------------- |
| **#os**           | 운영체제(OS)  | String | All Client  | OS 종류.                   | Android, iOS, Windows, macOS 등         |
| **#os_version**   | OS 버전       | String | All Client  | 디바이스의 운영 체제 버전. | 버전 형식 (예: 14.0, 11.0)              |
| **#device_model** | 디바이스 모델 | String | All Client  | 디바이스 모델명.           | 실제 모델명 (예: iPhone 13, Galaxy S21) |
| **#device_type**  | 디바이스 타입 | String | All Client  | 디바이스 유형.             | Phone, Tablet, Desktop 등               |

#### 3.2. 모바일 전용 속성

| 속성 이름         | 이름           | 유형   | 설명                                      | 생성 시 고려사항                            |
| :---------------- | :------------- | :----- | :---------------------------------------- | :------------------------------------------ |
| **#manufacturer** | 제조사         | String | 디바이스를 제조한 회사.                   | Apple, Samsung, LG, Xiaomi 등               |
| **#app_version**  | 앱 버전        | String | 현재 설치된 앱의 버전.                    | 버전 형식 (예: 1.0.0, 2.3.1)                |
| **#bundle_id**    | 앱 고유 식별자 | String | 앱의 고유 패키지 이름 또는 프로세스 이름. | 역도메인 형식 (예: com.example.app)         |
| **#network_type** | 네트워크 상태  | String | 데이터 전송 시 네트워크 상태.             | WIFI, 4G, 5G, 3G, Unknown 등                |
| **#carrier**      | 통신사         | String | 디바이스가 연결된 통신사.                 | SKT, KT, LG U+, Verizon, AT&T 등            |
| **#install_time** | 앱 설치 시간   | Time   | 앱이 디바이스에 설치된 시간.              | ISO 8601 형식 타임스탬프                    |
| **#simulator**    | 시뮬레이터     | Number | 실제 디바이스 여부 (1: true, 0: false).   | 0 또는 1                                    |
| **#ram**          | RAM 상태       | String | 사용 가능한 RAM / 총 RAM.                 | 형식: "사용가능/전체" (예: "2048MB/4096MB") |
| **#disk**         | 스토리지 상태  | String | 사용 가능한 스토리지 / 총 스토리지.       | 형식: "사용가능/전체" (예: "32GB/64GB")     |
| **#fps**          | 프레임레이트   | Number | 현재 디바이스 화면의 초당 프레임 수.      | 숫자 값 (예: 60, 120)                       |

#### 3.3. 웹 전용 속성

| 속성 이름            | 이름               | 유형   | 설명                            | 생성 시 고려사항                             |
| :------------------- | :----------------- | :----- | :------------------------------ | :------------------------------------------- |
| **#browser**         | 브라우저 종류      | String | 사용 중인 브라우저 종류.        | Chrome, Firefox, Safari, Edge 등             |
| **#browser_version** | 브라우저 버전      | String | 사용 중인 브라우저 버전.        | 버전 형식 (예: 120.0.0.0)                    |
| **#ua**              | 유저 에이전트 정보 | String | OS, CPU, 브라우저 등 상세 정보. | 실제 User-Agent 문자열 형식                  |
| **#utm**             | 광고 캠페인 출처   | String | 유저 유입 광고/캠페인 정보.     | JSON 형식의 UTM 파라미터 (source, medium 등) |

---

### 4. 이벤트별 전용 속성

특정 이벤트 타입에 따라 추가로 포함할 수 있는 속성입니다.

#### 4.1. 앱 시작 이벤트 (`ta_app_start`)

| 속성 이름                   | 유형          | 설명                                            | 생성 시 고려사항                      |
| :-------------------------- | :------------ | :---------------------------------------------- | :------------------------------------ |
| **#resume_from_background** | String        | 백그라운드에서 재시작되었는지 여부.             | "true" 또는 "false"                   |
| **#start_reason**           | String (JSON) | URL 또는 Intent로 앱이 실행된 경우의 시작 원인. | JSON 형식 (예: {"url": "app://home"}) |
| **#background_duration**    | Number        | 백그라운드에 머문 시간 (초 단위).               | 숫자 값 (예: 30, 120)                 |

#### 4.2. 앱 종료 이벤트 (`ta_app_end`)

| 속성 이름     | 유형   | 설명                                 | 생성 시 고려사항        |
| :------------ | :----- | :----------------------------------- | :---------------------- |
| **#duration** | Number | 앱 시작부터 종료까지 경과 시간 (초). | 숫자 값 (예: 300, 1800) |

#### 4.3. 페이지뷰 이벤트 (`ta_app_view`)

| 속성 이름          | 유형   | 플랫폼     | 설명                                        | 생성 시 고려사항                                |
| :----------------- | :----- | :--------- | :------------------------------------------ | :---------------------------------------------- |
| **#title**         | String | All Client | 페이지/Activity/View Controller의 제목.     | 페이지 타이틀 (예: "홈", "상품 상세")           |
| **#screen_name**   | String | Mobile     | 페이지/Activity/View Controller의 클래스명. | 클래스명 (예: MainActivity, HomeViewController) |
| **#url**           | String | All Client | 현재 페이지의 URL.                          | 전체 URL (예: https://example.com/home)         |
| **#url_path**      | String | Web        | 현재 페이지의 경로.                         | 경로만 (예: /home, /products/123)               |
| **#referrer**      | String | All Client | 이전 페이지의 URL.                          | 전체 URL 또는 빈 문자열                         |
| **#referrer_host** | String | Web        | 이전 페이지의 도메인.                       | 도메인만 (예: example.com)                      |

#### 4.4. 클릭 이벤트 (`ta_app_click`)

| 속성 이름             | 유형   | 플랫폼     | 설명                            | 생성 시 고려사항                                 |
| :-------------------- | :----- | :--------- | :------------------------------ | :----------------------------------------------- |
| **#title**            | String | All Client | 페이지/Activity의 제목.         | 페이지 타이틀                                    |
| **#screen_name**      | String | Mobile     | 페이지/Activity의 클래스명.     | 클래스명                                         |
| **#element_id**       | String | Mobile     | 클릭된 View의 ID.               | View ID (예: btn_submit, img_logo)               |
| **#element_type**     | String | Mobile     | 클릭된 View의 타입.             | Button, TextView, ImageView 등                   |
| **#element_selector** | String | Mobile     | 클릭된 View의 경로 기반 선택자. | 계층 구조 (예: MainActivity/LinearLayout/Button) |
| **#element_position** | String | Mobile     | 클릭된 View의 위치 정보.        | 좌표 또는 인덱스 (예: "0,0" 또는 "index:2")      |
| **#element_content**  | String | Mobile     | 클릭된 View 위에 표시된 내용.   | 텍스트 내용 (예: "구매하기", "로그인")           |

#### 4.5. 크래시 이벤트 (`ta_app_crash`)

| 속성 이름               | 유형   | 플랫폼 | 설명                                 | 생성 시 고려사항          |
| :---------------------- | :----- | :----- | :----------------------------------- | :------------------------ |
| **#app_crashed_reason** | String | iOS    | 크래시 발생 시의 스택 트레이스 정보. | 스택 트레이스 문자열 형식 |

---

### 5. 시스템 필드 (필수 포함)

로그 생성 시 **반드시 포함**해야 하는 시스템 필드입니다.

#### 5.1. 이벤트 데이터 필수 필드

| 필드 이름        | 이름        | 유형   | 설명                         | 생성 시 고려사항                        |
| :--------------- | :---------- | :----- | :--------------------------- | :-------------------------------------- |
| **#app_id**      | 프로젝트 ID | 텍스트 | 이벤트가 속한 프로젝트의 ID. | 프로젝트 식별자                         |
| **#account_id**  | 계정 ID     | 텍스트 | 로그인 상태의 유저 식별자.   | 유저 계정 ID (로그인 유저의 경우)       |
| **#distinct_id** | 게스트 ID   | 텍스트 | 비로그인 상태의 유저 식별자. | 디바이스 또는 세션 기반 고유 ID         |
| **#event_name**  | 이벤트 이름 | 텍스트 | 이벤트의 이름.               | 이벤트 타입 (예: ta_app_view, purchase) |
| **#event_time**  | 이벤트 시간 | 시간   | 이벤트 발생 시간.            | ISO 8601 형식 타임스탬프                |
| **#uuid**        | UUID        | 텍스트 | 이벤트의 고유 식별 ID.       | UUID v4 형식                            |

#### 5.2. 유저 데이터 필수 필드

| 필드 이름        | 이름      | 유형   | 설명                         | 생성 시 고려사항                |
| :--------------- | :-------- | :----- | :--------------------------- | :------------------------------ |
| **#account_id**  | 계정 ID   | 텍스트 | 유저의 로그인 계정 식별자.   | 유저 계정 ID                    |
| **#distinct_id** | 게스트 ID | 텍스트 | 비로그인 상태의 유저 식별자. | 디바이스 또는 세션 기반 고유 ID |

---

### 6. 로그 생성 시 권장사항

1. **필수 시스템 필드**: `#app_id`, `#account_id` 또는 `#distinct_id`, `#event_name`, `#event_time`, `#uuid`는 반드시 포함해야 합니다.
2. **이벤트 타입별 속성**: 생성하려는 이벤트 타입에 맞는 전용 속성을 포함하면 더욱 현실적인 로그를 생성할 수 있습니다.
3. **플랫폼 일관성**: 모바일 로그를 생성한다면 모바일 전용 속성을, 웹 로그를 생성한다면 웹 전용 속성을 포함하세요.
4. **데이터 형식 준수**: 각 속성의 데이터 타입과 형식을 정확히 따라야 합니다.

   - IP 주소: IPv4 형식 (예: 192.168.1.1)
   - 시간: ISO 8601 형식 (예: 2025-10-24T10:30:00Z)
   - 국가 코드: ISO 3166-1 alpha-2 (예: KR, US)
   - 언어 코드: ISO 639-1 (예: ko, en)

5. **논리적 일관성**: 생성된 속성 간에 논리적 일관성을 유지하세요.

   - 예: `#country_code`가 "KR"이면 `#country`는 "South Korea"
   - 예: `#os`가 "iOS"이면 `#manufacturer`는 "Apple"

6. **선택적 속성**: 모든 프리셋 속성을 포함할 필요는 없으며, 시나리오에 따라 필요한 속성만 선택하여 생성할 수 있습니다.
